---
alwaysApply: true
description: GitHub æäº¤å’Œç‰ˆæœ¬ç®¡ç†ä¸¥æ ¼è§„èŒƒ
---

# GitHub æäº¤æ ‡å‡†åŒ–è§„èŒƒ

## âš ï¸ æ¯æ¬¡æäº¤å‰å¿…é¡»å®Œæˆçš„æ­¥éª¤

### 1. æ›´æ–° package.json ç‰ˆæœ¬å·
- **å¿…é¡»**å°† `version` å­—æ®µçš„ **patch ç‰ˆæœ¬å· +1**
- æ ¼å¼ï¼š`ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.è¡¥ä¸ç‰ˆæœ¬`ï¼ˆå¦‚ 2.0.16 â†’ 2.0.17ï¼‰

### 2. æ£€æŸ¥æ˜¯å¦æœ‰æœªæäº¤çš„ä¾èµ–å˜æ›´
- å¦‚æœä¿®æ”¹äº†ä¾èµ–ï¼ˆnpm installï¼‰ï¼Œ**å¿…é¡»**æäº¤ `package-lock.json`
- æ£€æŸ¥å‘½ä»¤ï¼š`git status | grep package-lock`

### 3. Commit æ¶ˆæ¯æ ¼å¼ï¼ˆä¸¥æ ¼éµå¾ªï¼‰

```
<type>: <description> (v<version>)

<è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼Œå¤šè¡Œï¼‰>
```

**Type ç±»å‹ï¼ˆå¿…é¡»ä½¿ç”¨ä»¥ä¸‹ä¹‹ä¸€ï¼‰ï¼š**
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ bug  
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `refactor`: ä»£ç é‡æ„
- `docs`: æ–‡æ¡£æ›´æ–°
- `chore`: æ„å»º/å·¥å…·æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´

**ç¤ºä¾‹ï¼š**
```bash
feat: å®ç° Webhook è‡ªåŠ¨è½¬å‘åˆ°æ‰€æœ‰èŠ‚ç‚¹ (v2.0.17)

- æ·»åŠ èŠ‚ç‚¹åˆ—è¡¨é…ç½®
- å®ç°è‡ªåŠ¨è½¬å‘æœºåˆ¶
- å¹¶å‘è½¬å‘åˆ°æ‰€æœ‰èŠ‚ç‚¹
- é˜²æ­¢å¾ªç¯è½¬å‘
```

### 4. åˆ›å»º Git Tagï¼ˆå¿…é¡»ï¼‰

```bash
git tag v2.0.17
```

### 5. æ¨é€åˆ° GitHubï¼ˆå¿…é¡»åŒæ—¶æ¨é€ä»£ç å’Œæ ‡ç­¾ï¼‰

```bash
git push && git push --tags
```

---

## ğŸ”„ è¿œç¨‹èŠ‚ç‚¹æ›´æ–°è§„èŒƒ

### âš ï¸ é‡è¦ï¼šè¿œç¨‹èŠ‚ç‚¹æ›´æ–°ä½¿ç”¨å¼ºåˆ¶åŒæ­¥

åœ¨è¿œç¨‹èŠ‚ç‚¹ï¼ˆtile0, tile3, tile4 ç­‰ï¼‰æ›´æ–°æ—¶ï¼Œ**ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æµç¨‹**ï¼š

#### **è‡ªåŠ¨æ›´æ–°è„šæœ¬ï¼ˆæ¨èï¼‰**

```bash
cd /opt/zeromaps-rpc
sudo ./update.sh
```

`update.sh` è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. ä½¿ç”¨ `git reset --hard origin/master` å¼ºåˆ¶åŒæ­¥
2. æ‰§è¡Œ `npm install` æ›´æ–°ä¾èµ–
3. æ‰§è¡Œ `npm run build` ç¼–è¯‘ä»£ç 
4. é‡å¯ PM2 æœåŠ¡

#### **æ‰‹åŠ¨æ›´æ–°æµç¨‹**

å¦‚æœéœ€è¦æ‰‹åŠ¨æ›´æ–°ï¼Œ**å¿…é¡»ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤**ï¼š

```bash
cd /opt/zeromaps-rpc

# 1. å¼ºåˆ¶åŒæ­¥è¿œç¨‹ä»£ç ï¼ˆä¸è¦ç”¨ git pullï¼‰
git fetch origin master
git reset --hard origin/master

# 2. æ›´æ–°ä¾èµ–
npm install

# 3. ç¼–è¯‘
npm run build

# 4. é‡å¯æœåŠ¡
pm2 restart zeromaps-rpc
```

#### **âŒ ç¦æ­¢çš„æ“ä½œ**

```bash
# âŒ ä¸è¦ç”¨ git pullï¼ˆä¼šå› ä¸º package-lock.json å†²çªå¤±è´¥ï¼‰
git pull

# âŒ ä¸è¦ç”¨ git stashï¼ˆä¼šä¿ç•™æœ¬åœ°ä¿®æ”¹ï¼Œå¯¼è‡´åç»­å†²çªï¼‰
git stash
git pull
```

#### **âœ… æ­£ç¡®çš„æ€è·¯**

- **å¼€å‘ç¯å¢ƒï¼ˆæœ¬åœ°ï¼‰**ï¼šæ­£å¸¸æäº¤ï¼Œä¿ç•™å†å²
- **ç”Ÿäº§ç¯å¢ƒï¼ˆè¿œç¨‹èŠ‚ç‚¹ï¼‰**ï¼šå¼ºåˆ¶åŒæ­¥ï¼Œä¸ä¿ç•™æœ¬åœ°ä¿®æ”¹
- åŸå› ï¼šè¿œç¨‹èŠ‚ç‚¹çš„æœ¬åœ°ä¿®æ”¹ï¼ˆå¦‚è‡ªåŠ¨ç”Ÿæˆçš„ lock æ–‡ä»¶ï¼‰æ— éœ€ä¿ç•™

---

## ğŸ“‹ å®Œæ•´æäº¤æµç¨‹ï¼ˆAI å¿…é¡»éµå¾ªï¼‰

```bash
# 1. ä¿®æ”¹ä»£ç 
# ... ç¼–è¾‘ä»£ç  ...

# 2. æ£€æŸ¥ä¾èµ–å˜æ›´
if git status | grep -q "package-lock.json"; then
    echo "æ£€æµ‹åˆ°ä¾èµ–å˜æ›´ï¼Œå°†ä¸€å¹¶æäº¤"
fi

# 3. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆpatch +1ï¼‰
# ç¼–è¾‘ package.jsonï¼Œversion å­—æ®µ +1

# 4. æ·»åŠ æ‰€æœ‰æ›´æ”¹ï¼ˆåŒ…æ‹¬ package-lock.jsonï¼‰
git add -A

# 5. æäº¤ï¼ˆä¸¥æ ¼æ ¼å¼ï¼‰
git commit -m "<type>: <description> (vç‰ˆæœ¬å·)

<è¯¦ç»†è¯´æ˜>"

# 6. åˆ›å»ºæ ‡ç­¾
git tag vç‰ˆæœ¬å·

# 7. æ¨é€ä»£ç å’Œæ ‡ç­¾
git push && git push --tags

# 8. éªŒè¯æ¨é€æˆåŠŸ
git log --oneline --decorate -1
```

---

## ğŸš¨ AI æ‰§è¡Œè§„åˆ™

### **æäº¤ä»£ç æ—¶ï¼ˆAI å¿…é¡»ï¼‰ï¼š**

1. âœ… **æ€»æ˜¯** æ›´æ–° `package.json` ç‰ˆæœ¬å·
2. âœ… **æ€»æ˜¯** ä½¿ç”¨æ ‡å‡†åŒ–çš„ commit æ¶ˆæ¯æ ¼å¼
3. âœ… **æ€»æ˜¯** åˆ›å»ºå¯¹åº”çš„ Git Tag
4. âœ… **æ€»æ˜¯** åŒæ—¶æ¨é€ä»£ç å’Œ Tag
5. âœ… **æ€»æ˜¯** æ£€æŸ¥ `package-lock.json` æ˜¯å¦éœ€è¦æäº¤
6. âœ… **æ€»æ˜¯** éªŒè¯æ¨é€æˆåŠŸ

### **ç»™ç”¨æˆ·è¿œç¨‹èŠ‚ç‚¹æ›´æ–°å»ºè®®æ—¶ï¼ˆAI å¿…é¡»ï¼‰ï¼š**

1. âœ… **æ€»æ˜¯** å»ºè®®ä½¿ç”¨ `sudo ./update.sh`
2. âœ… **æ€»æ˜¯** å¦‚æœæ‰‹åŠ¨æ›´æ–°ï¼Œå»ºè®®ç”¨ `git reset --hard origin/master`
3. âŒ **ç¦æ­¢** å»ºè®®ä½¿ç”¨ `git pull`
4. âŒ **ç¦æ­¢** å»ºè®®ä½¿ç”¨ `git stash`

### **é‡åˆ°è¿œç¨‹èŠ‚ç‚¹å†²çªæ—¶ï¼ˆAI å¿…é¡»ï¼‰ï¼š**

```bash
# ç›´æ¥å‘Šè¯‰ç”¨æˆ·æ‰§è¡Œï¼ˆä¸è¦é—®ï¼‰ï¼š
cd /opt/zeromaps-rpc
git fetch origin master
git reset --hard origin/master
npm install
npm run build
sudo ./update.sh
```

---

## âŒ é”™è¯¯ç¤ºä¾‹

```bash
# âŒ é”™è¯¯ï¼šæ²¡æœ‰ç‰ˆæœ¬å·
git commit -m "æ·»åŠ æ–°åŠŸèƒ½"

# âŒ é”™è¯¯ï¼šç‰ˆæœ¬å·æ²¡æœ‰é€’å¢  
# package.json è¿˜æ˜¯ 2.0.17

# âŒ é”™è¯¯ï¼šæ²¡æœ‰åˆ›å»º tag
git push  # åªæ¨é€äº†ä»£ç 

# âŒ é”™è¯¯ï¼šè¿œç¨‹èŠ‚ç‚¹ç”¨ git pull
cd /opt/zeromaps-rpc
git pull  # ä¼šå› ä¸º lock æ–‡ä»¶å†²çªå¤±è´¥
```

## âœ… æ­£ç¡®ç¤ºä¾‹

```bash
# âœ… æ­£ç¡®ï¼šå®Œæ•´æµç¨‹
# 1. æ›´æ–°ç‰ˆæœ¬ package.json: 2.0.17 â†’ 2.0.18
# 2. æäº¤
git add -A
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½ (v2.0.18)

- åŠŸèƒ½1
- åŠŸèƒ½2"

# 3. åˆ›å»º tag
git tag v2.0.18

# 4. æ¨é€
git push && git push --tags

# 5. è¿œç¨‹èŠ‚ç‚¹æ›´æ–°
# åœ¨ tile4 ä¸Šæ‰§è¡Œï¼š
cd /opt/zeromaps-rpc
sudo ./update.sh
```

---

## ğŸ” ç‰ˆæœ¬å·æŸ¥è¯¢

```bash
# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
grep version package.json

# æŸ¥çœ‹æœ€æ–° tag
git describe --tags --abbrev=0

# æŸ¥çœ‹è¿œç¨‹æœ€æ–°æäº¤
git log origin/master --oneline -1
```

---

## ğŸ’¡ é‡è¦æé†’

**AI åœ¨æ¯æ¬¡æäº¤å‰å¿…é¡»ï¼š**
1. æ£€æŸ¥ [package.json](mdc:package.json) ç‰ˆæœ¬å·æ˜¯å¦å·²æ›´æ–°
2. æ£€æŸ¥ commit æ¶ˆæ¯æ˜¯å¦åŒ…å«ç‰ˆæœ¬å·
3. æ£€æŸ¥æ˜¯å¦åˆ›å»ºäº†å¯¹åº”çš„ Git Tag
4. æ£€æŸ¥æ˜¯å¦åŒæ—¶æ¨é€ä»£ç å’Œ Tag
5. å¦‚æœæœ‰ä¾èµ–å˜æ›´ï¼Œç¡®ä¿ `package-lock.json` å·²æäº¤

**AI åœ¨è¿œç¨‹èŠ‚ç‚¹é‡åˆ°å†²çªæ—¶å¿…é¡»ï¼š**
1. ç›´æ¥å»ºè®®ä½¿ç”¨ `git reset --hard origin/master`
2. ä¸è¦å»ºè®®ä½¿ç”¨ `git pull` æˆ– `git stash`
3. ä¼˜å…ˆå»ºè®®ä½¿ç”¨ `sudo ./update.sh`ï¼ˆæœ€å®‰å…¨ï¼‰
